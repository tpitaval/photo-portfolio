---
import BaseLayout from "../layouts/BaseLayout.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import Hero from "../components/Hero.astro";
import SectionReveal from "../components/SectionReveal.jsx";
import GalleryGrid from "../components/GalleryGrid.jsx";

// Load recent projects from content
const modules = import.meta.glob('../content/work/*.md', { eager: true });
const projects = Object.entries(modules).map(([path, mod]) => {
  const slug = path.split('/').pop().replace('.md','');
  const { title, category, cover } = mod.frontmatter;
  return { slug, title, category, cover };
}).slice(0, 6);
---
<BaseLayout title="Home – Portfolio" description="Recent photography work and stories.">
  <Header />
  <main class="pt-16">
    <Hero />

    <section id="recent" class="container-page mt-16 space-y-8">
      <SectionReveal>
        <h2 class="h2 font-semibold">Recent work</h2>
      </SectionReveal>
      <SectionReveal>
        <GalleryGrid items={projects} />
      </SectionReveal>
      <div class="mt-6">
        <a href="/work" class="btn btn-ghost">All projects</a>
      </div>
    </section>

    <section class="container-page mt-24">
      <SectionReveal>
        <div class="rounded-2xl bg-ink text-paper p-8 flex flex-col md:flex-row items-center justify-between gap-4">
          <div>
            <h3 class="text-xl font-semibold">Let’s connect</h3>
            <p class="opacity-80">Available for commissions and collaborations.</p>
          </div>
          <a href="mailto:hello@example.com" class="btn btn-primary">Email me</a>
        </div>
      </SectionReveal>
    </section>
  </main>
  <Footer />
</BaseLayout>

